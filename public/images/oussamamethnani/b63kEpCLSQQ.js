if (self.CavalryLogger) { CavalryLogger.start_js(["Dfn+f"]); }

__d("TimelineJumperCursorConfig",[],(function(a,b,c,d,e,f){e.exports={BOUNDARY_PREFIX:"boundary",CURSOR_PREFIX:"jumper",CURSOR_DELIMITER:"_"}}),null);
__d("TimelineJumperStoryUtil",["DataStore","FBJSON"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getTimeFromStory:function(a){if(!a.id)return null;a=b("DataStore").get(a,"store");if(!a)return null;a=b("FBJSON").parse(a);return parseInt(a.timestamp,10)}};e.exports=a}),null);
__d("TimelineMonitorElements",["csx","Arbiter","DOMQuery","Event","Run","TimelineJumperStoryUtil","Vector","ViewportBounds","ge","queryThenMutateDOM","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j=0,k=null,l=!1;function m(){h=null,i=null,j=0,k&&k.remove(),k=null,l=!1}function n(){b("queryThenMutateDOM")(p,o,"TimelineMonitorElements/scroll")}function o(){i&&(b("Arbiter").inform(r.ELEMENT_CHANGED,i),h=i,i=null)}function p(){__p&&__p();var a=b("ViewportBounds").getTop()+b("Vector").getScrollPosition().y,c=q(a);if(c){if(h&&h.id===c.id){j=a;return}var d=b("TimelineJumperStoryUtil").getTimeFromStory(c);if(!d)return;i={id:c.id,timestamp:d,fromAbove:j<a}}j=a}function q(a){__p&&__p();var c=b("ge")("timeline_tab_content");if(!c)return null;c=b("DOMQuery").scry(c,"._2q8l");for(var d=0;d<c.length;d++){var e=c[d],f=b("Vector").getElementPosition(e).y+b("Vector").getElementDimensions(e).y;if(a<=f)return e}return null}var r={ELEMENT_CHANGED:"TimelineMonitorElements/elementChanged",init:function(){k||(k=b("Event").listen(window,"scroll",b("throttle")(n,100))),l||(b("Run").onLeave(m),l=!0),n()}};e.exports=r}),null);
__d("TimelineSectionTokenConstants",[],(function(a,b,c,d,e,f){"use strict";a={KEY_MONTH_POSITION:2,KEY_YEAR_POSITION:1,LAST_MONTH_OF_YEAR:12,MIN_TOKENS_PER_KEY:2,KEY_LENGTH_WITH_MONTH:3,KEY_DELIMITER:"_",RECENT_TOKEN:"recent",MONTH_TOKEN_PREFIX:"month",YEAR_TOKEN_PREFIX:"year"};e.exports=a}),null);
__d("TimelineSectionToken",["invariant","DateConsts","TimelineJumperCursorConfig","TimelineSectionTokenConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("DateConsts").MS_PER_SEC,i=b("TimelineJumperCursorConfig").CURSOR_DELIMITER,j=b("TimelineJumperCursorConfig").CURSOR_PREFIX,k=b("TimelineSectionTokenConstants").KEY_DELIMITER,l=b("TimelineSectionTokenConstants").KEY_LENGTH_WITH_MONTH,m=b("TimelineSectionTokenConstants").KEY_MONTH_POSITION,n=b("TimelineSectionTokenConstants").KEY_YEAR_POSITION,o=b("TimelineSectionTokenConstants").LAST_MONTH_OF_YEAR,p=b("TimelineSectionTokenConstants").MIN_TOKENS_PER_KEY,q=b("TimelineSectionTokenConstants").MONTH_TOKEN_PREFIX;function r(a){a=a.split(k);a.length>=p||g(0,4411,p.toString());return a}var s={createMonthTokenWithYearAndMonth:function(a,b){b<=12&&b>0||g(0,4410);return q.concat(k,a.toString(),k,b.toString())},createMonthTokenWithKey:function(a,b){a=s.getYearFrom(a);return s.createMonthTokenWithYearAndMonth(a,b)},getMonthFrom:function(a){a=r(a);return a.length===l?parseInt(a[m],10):o},getYearFrom:function(a){a=r(a);return parseInt(a[n],10)},getCursorFromRecentToken:function(){var a=Date.now()/h;return j.concat(i,a.toString())},getCursorFrom:function(a){var b=s.getYearFrom(a);a=s.getMonthFrom(a);b=(new Date(b,a,1).valueOf()/h-1).toString();return j.concat(i,b)}};e.exports=s}),null);
__d("ButtonGroup",["CSS","DataStore","Parent"],(function(a,b,c,d,e,f){__p&&__p();var g="firstItem",h="lastItem";function i(a,c){a=b("Parent").byClass(a,c);if(!a)throw new Error("invalid use case");return a}function j(a){return b("CSS").shown(a)&&Array.from(a.childNodes).some(b("CSS").shown)}function k(a){var c,d,e;Array.from(a.childNodes).forEach(function(a){e=j(a),b("CSS").removeClass(a,g),b("CSS").removeClass(a,h),b("CSS").conditionShow(a,e),e&&(c=c||a,d=a)});c&&b("CSS").addClass(c,g);d&&b("CSS").addClass(d,h);b("CSS").conditionShow(a,c)}function a(a,b){b=i(b,"uiButtonGroupItem");a(b);k(b.parentNode)}c=function(){"use strict";function a(a){this._root=i(a,"uiButtonGroup"),b("DataStore").set(this._root,"ButtonGroup",this),k(this._root)}a.getInstance=function(c){c=i(c,"uiButtonGroup");var d=b("DataStore").get(c,"ButtonGroup");return d||new a(c)};return a}();Object.assign(c.prototype,{hideItem:a.bind(null,b("CSS").hide),showItem:a.bind(null,b("CSS").show),toggleItem:a.bind(null,b("CSS").toggle)});e.exports=c}),null);
__d("TimelineStickyHeaderWithJumperNav",["Arbiter","ButtonGroup","CSS","DataStore","DateConsts","DOM","Event","Parent","ProfileTabUtils","ProfileTimelineUILogger","Run","SelectorDeprecated","SubscriptionsHandler","TimelineJumperController","TimelineMonitorElements","TimelineSectionToken","TimelineSectionTokenConstants","TimelineStickyHeader","URI","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DateConsts").MS_PER_SEC,h=b("TimelineSectionTokenConstants").KEY_DELIMITER,i=b("TimelineSectionTokenConstants").KEY_LENGTH_WITH_MONTH,j=b("TimelineSectionTokenConstants").RECENT_TOKEN,k=b("TimelineSectionTokenConstants").YEAR_TOKEN_PREFIX,l=!1,m=null,n=null,o=null,p={},q=null,r=null;function s(a){__p&&__p();if(!a.timestamp||!o)return;a=new Date(parseInt(a.timestamp,10)*g);var c=(a.getMonth()+1).toString();a=k.concat(h,a.getFullYear().toString());if(b("SelectorDeprecated").getOption(o,a)){b("SelectorDeprecated").setSelected(o,a,!0);v(a);a=p[a];a&&b("SelectorDeprecated").setSelected(a,c,!0)}else b("SelectorDeprecated").setSelected(o,j,!0),v(j)}function t(){var a=b("SelectorDeprecated").getSelectorMenu(o);b("nullthrows")(r).addSubscriptions(b("Event").listen(a,"click",function(a){return u(a)}))}function u(a){var c=a.target;if(!(c instanceof Node))return;c=b("Parent").byTag(c,"a");c=c&&b("DataStore").get(c,"key");c&&(b("ProfileTimelineUILogger").logStickyHeaderScrubberWithJumperClick(c),a.preventDefault(),v(c),b("TimelineStickyHeader").scrollIntoView(),b("TimelineJumperController").loadSection(c))}function v(a){a===j?w():x(a)}function w(){m&&m.hideItem(q)}function x(a){__p&&__p();if(a.split(h).length===i||!q)return;a=y(a);b("DOM").insertAfter(q,a);b("CSS").hide(q);for(var c in p){var d=p[c];b("CSS").conditionShow(d,d===a)}m&&m.showItem(q)}function y(a){__p&&__p();if(!q)return null;var c=p[a];if(!c){c=p[a]=q.cloneNode(!0);var d=b("DOM").scry(c,"li.activityLog a")[0];d&&(d.href=new(b("URI"))(d.href).addQueryData({key:a}));d=b("TimelineSectionToken").getYearFrom(a);var e=b("DOM").scry(c,"li.monthSelector a");for(var f=0;f<e.length;f++){var g=e[f],h=g.getAttribute("data-key");g.setAttribute("data-key",b("TimelineSectionToken").createMonthTokenWithKey(a,h));new Date(d,h-1)>new Date()&&b("CSS").hide(g)}b("nullthrows")(r).addSubscriptions(b("Event").listen(c,"click",function(a){return u(a)}))}return c}function z(a){a=a.target;if(!(a instanceof Element))return;a=b("Parent").byClass(a,"itemAnchor");if(a){a=b("DataStore").get(a,"tab-key");a&&b("ProfileTimelineUILogger").logStickyHeaderNavItemWithJumperClick(a)}}function A(){l=!1,m=null,n=null,o=null,p={},q=null,r&&(r.release(),r=null)}a={init:function(a){__p&&__p();if(l)return;l=!0;n=b("DOM").scry(a,"div.pageMenu")[0];o=b("DOM").find(a,"div.sectionMenu");m=b("ButtonGroup").getInstance(o);r=new(b("SubscriptionsHandler"))();n&&r.addSubscriptions(b("Event").listen(n,"click",function(a){return z(a)}));q=b("DOM").find(a,"div.subsectionMenu");t();r.addSubscriptions(b("Arbiter").subscribe(b("TimelineMonitorElements").ELEMENT_CHANGED,function(a,b){s(b)}),b("Arbiter").subscribe("TimelineController/sectionKeyChange",function(a,c){a=b("ProfileTabUtils").isTimelineTab(c[0]);n&&b("CSS").conditionShow(n,a);o&&b("CSS").conditionShow(o,a);if(!a)for(var d in p){c=p[d];b("CSS").hide(c)}}));b("TimelineMonitorElements").init();b("Run").onLeave(function(){return A()})}};e.exports=a}),null);