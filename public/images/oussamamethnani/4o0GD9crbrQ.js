if (self.CavalryLogger) { CavalryLogger.start_js(["xMvz3"]); }

__d("AnimatedImageMarauderLogger",["MarauderLogger"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=!1,this.$2=null,this.$3=null,this.$4=!1,this.$5=!1,this.$6=!1,this.$7=null,this.$8=!1,this.$9=null,this.$10=null,this.$11=0,this.$12=!1}var c=a.prototype;c.initSession=function(a,b,c,d,e,f){this.$1=a,this.$13=b,this.$6=d,this.$7=c,this.$8=e,this.$9=f,this.$4=!0};c.hasCurrentSession=function(){return this.$4};c.logAnimatedRender=function(a){this.$10&&this.$11===0&&(this.$2=a-this.$10,this.$5=!0)};c.logStaticClick=function(a){this.$10=a,this.$12=!0};c.endSession=function(a){this.$9&&(this.$11=a-this.$9),this.$4=!1,this.logSession()};c.logSession=function(){var a={autoplay:this.$1,download_time:this.$2,is_video:this.$6,image_src:this.$7,fbid:this.$13,load_succeeded:this.$5,plays_inline:this.$8,time_spent:this.$11,was_tapped:this.$12};b("MarauderLogger").log("animated_image_session",void 0,a)};return a}();e.exports=a}),null);
__d("FeedAnimatedImageShare.react",["cx","AnimatedImageMarauderLogger","DOMContainer.react","Event","Image.react","OnVisible.react","React","ReactDOM","ReactTransitionEvents","SubscriptionsHandler","VideoPlayerReason"],(function(a,b,c,d,e,f,g){__p&&__p();var h=20;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={disableAutoplay:!1,hasPlayedAtleastOnce:!1,isLoaded:!1,isLoading:!1,isPlaying:!1,wasPlaying:!1},d.$3=null,d.$5=function(){d.setState({disableAutoplay:!0});if(!d.props.isPlayableInline){window.open(d.props.href,"_blank");return}d.state.isPlaying?d.pause(b("VideoPlayerReason").USER):d.play(b("VideoPlayerReason").USER)},d.$7=function(){d.$2.reset()},d.$13=function(a){d.$2=a},d.$14=function(){d.$11(),!d.state.isPlaying&&d.props.isPlayableInline&&(d.$8()||d.state.wasPlaying)&&d.play(d.state.wasPlaying?b("VideoPlayerReason").PAGE_VISIBILITY:b("VideoPlayerReason").AUTOPLAY)},d.$6=function(){d.$12(),d.setState({wasPlaying:d.state.isPlaying}),d.state.isPlaying&&d.pause(b("VideoPlayerReason").PAGE_VISIBILITY)},d.play=function(a){d.$1.logStaticClick(Date.now()),d.setState({isPlaying:!0}),d.props.videoController?(d.state.hasPlayedAtleastOnce||d.setState({hasPlayedAtleastOnce:!0}),d.props.videoController.play(a)):d.$9()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=new(b("AnimatedImageMarauderLogger"))(),this.refs.playButton&&b("ReactTransitionEvents").addEndEventListener(b("ReactDOM").findDOMNode(this.refs.playButton),this.play),this.$4()};d.$4=function(){var a=this;if(!this.props.videoController||!this.refs.videoPlayer)return;b("ReactDOM").findDOMNode(this.refs.videoPlayer).addEventListener("click",this.$5);this.props.videoController.addListener("finishPlayback",function(){window.setTimeout(function(){a.props.videoController.play(b("VideoPlayerReason").LOOP)},1)});this.$3=new(b("SubscriptionsHandler"))();this.$3.addSubscriptions(b("Event").listen(window,"blur",this.$6),b("Event").listen(window,"focus",this.$7))};d.componentWillUnmount=function(){this.$3&&this.$3.release()};d.$8=function(){return this.props.autoplay&&!this.state.disableAutoplay};d.$9=function(){var a=this;if(this.state.isLoading)return;this.setState({isLoading:!0});var b=new Image();b.onload=function(){a.setState({hasPlayedAtleastOnce:!0,isLoaded:!0,isLoading:!1}),a.$1.logAnimatedRender(Date.now())};b.src=this.props.animatedSrc};d.$10=function(){if(this.props.disableClickToPlayButton)return null;var a=this.props.isPlayableInline&&(!this.state.isPlaying||this.state.isLoading),c=this.state.isLoading,d=!this.state.hasPlayedAtleastOnce&&this.state.isLoaded;return b("React").createElement("div",{className:a?"":"hidden_elem",onClick:this.$5,role:"presentation"},b("React").createElement("div",{ref:"playButton",className:"_393-"+(d?" _30a":"")}),b("React").createElement("div",{className:"_30b"+(c?" _30c":"")+(d?" _30e":"")}),b("React").createElement("div",{className:"_30h"+(d?" _30i":"")}))};d.$11=function(){this.$1.initSession(this.props.autoplay,this.props.fbid,this.props.href,this.props.isPlayableInline,!!this.props.videoController,Date.now())};d.$12=function(){this.$1&&this.$1.hasCurrentSession()&&this.$1.endSession(Date.now())};d.$15=function(){return!this.props.staticSrc?null:b("React").createElement(b("Image.react"),{className:"_9_m _30j",src:this.props.staticSrc,width:this.props.width,height:this.props.height,onClick:this.$5})};d.$16=function(){return b("React").createElement(b("Image.react"),{className:"_9_m",src:this.props.animatedSrc,width:this.props.width,height:this.props.height,onClick:this.$5})};d.$17=function(){return!this.state.isPlaying||!this.state.isLoaded||!this.props.isPlayableInline?this.$15():this.$16()};d.$18=function(){return!this.props.videoElement?null:b("React").createElement("span",null,b("React").createElement("span",{className:this.state.hasPlayedAtleastOnce?"":"hidden_elem"},b("React").createElement(b("DOMContainer.react"),{ref:"videoPlayer"},this.props.videoElement)),b("React").createElement("span",{className:this.state.hasPlayedAtleastOnce?"hidden_elem":""},this.$15()))};d.$19=function(){if(!this.state.isPlaying)if(this.props.overlayNode)return this.props.overlayNode;else if(this.props.overlay)return b("React").createElement(b("DOMContainer.react"),null,this.props.overlay);return null};d.pause=function(a){this.setState({isPlaying:!1}),this.props.videoController&&this.props.videoController.pause(a)};d.render=function(){var a=-1*(this.props.height*h/100);return b("React").createElement(b("OnVisible.react"),{onVisible:this.$14,onHidden:this.$6,buffer:a,ref:this.$13},b("React").createElement("div",{className:this.props.className},this.$18()||this.$17(),this.$10(),this.$19()))};return c}(b("React").Component);a.defaultProps={autoplay:!1,isPlayableInline:!1};e.exports=a}),null);